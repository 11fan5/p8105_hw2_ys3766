p8105_hw2_ys3766
================
Yifan Shi
2024-10-02

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.1     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(readxl)
```

### Problem 1

Importing data, cleaning data, selecting variables

``` r
transit = 
  read_csv(
    "data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv",
    col_types = cols(Route8 = "c", Route9 = "c", Route10 = "c", Route11= "c")) %>% 
  janitor::clean_names() %>% 
  select(
    line, station_name, station_latitude, station_longitude, entry, exit_only, vending, entrance_type, ada,
    starts_with("route")
  ) %>% 
  mutate(entry = ifelse(entry == "YES", TRUE, FALSE))
```

The resulting data set contains 1868 observations of 20 variables now.
It has variables on NYC subway lines, stations, location of the station,
entry and exit information, vending, ADA compliance information and
routes.I cleaned the data by converting column types of route8-route11,
cleaning the names of the variables, selecting relevant variables, and
converting the entry variable to logical. I would say the dataset is not
yet tidy, as the route variables is currently wide format. To further
tidy the data set, I would convert the route variables from wide to long
format, and create a new “route number” variable.

Number of distinct stations

``` r
transit %>% 
 distinct(line, station_name) %>% 
  nrow()
```

    ## [1] 465

There are 465 distinct stations.

ADA compliant stations

``` r
transit %>% 
  filter(ada == TRUE) %>% 
  distinct(line, station_name) %>% 
  nrow()
```

    ## [1] 84

There are 84 ADA compliant stations.

Proportion of station entrances/exits without vending allow entrance

``` r
transit %>% 
  filter(vending == "NO") %>% 
  pull(entry) %>% 
  mean()
```

    ## [1] 0.3770492

37.7% of station entrances/exits without vending allow entrance

Reformat the data so that route number and route name are distinct
variables

``` r
transit<-transit %>% 
  pivot_longer(
    route1:route11,
    names_to = "route_number",
    values_to = "route"
  )
```

Distinct stations serve the A train, how many ADA compliant

``` r
transit %>% 
  filter(route == "A") %>% 
  distinct(line, station_name) %>% 
  nrow()
```

    ## [1] 60

``` r
transit %>% 
  filter(route == "A", ada == TRUE) %>% 
  distinct(line, station_name) %>% 
  nrow()
```

    ## [1] 17

There are 60 distinct stations serving the A train, of which 17 are ADA
compliant.
